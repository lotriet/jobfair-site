<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>20-Second .NET Demo Timer</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        text-align: center;
        padding: 50px;
        margin: 0;
      }
      .timer {
        font-size: 4rem;
        margin: 30px 0;
        color: #ffd700;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }
      .instruction {
        font-size: 1.5rem;
        margin: 20px 0;
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        backdrop-filter: blur(10px);
      }
      .demo-steps {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin: 30px 0;
      }
      .step {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        border: 2px solid #ffd700;
      }
      .step.active {
        background: rgba(255, 215, 0, 0.3);
        transform: scale(1.05);
        transition: all 0.3s ease;
      }
      .btn {
        padding: 15px 30px;
        font-size: 1.2rem;
        background: #ffd700;
        color: #333;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        margin: 10px;
        font-weight: bold;
      }
      .btn:hover {
        transform: scale(1.05);
      }
      .links {
        margin: 30px 0;
      }
      .links a {
        display: inline-block;
        margin: 10px;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        text-decoration: none;
        border-radius: 25px;
      }
    </style>
  </head>
  <body>
    <h1>üöÄ .NET Micro Demo</h1>
    <div class="instruction">Ready for your 20-second demonstration!</div>

    <div class="timer" id="timer">20</div>

    <div class="demo-steps">
      <div class="step" id="step1">
        <h3>0-5s</h3>
        <p>Show this landing page and explain the demo</p>
      </div>
      <div class="step" id="step2">
        <h3>5-10s</h3>
        <p>Click "Interactive API Docs" to show Swagger UI</p>
      </div>
      <div class="step" id="step3">
        <h3>10-15s</h3>
        <p>Try GET /api/products to show async call</p>
      </div>
      <div class="step" id="step4">
        <h3>15-20s</h3>
        <p>Explain async/await + retry policy code</p>
      </div>
    </div>

    <button class="btn" onclick="startDemo()">‚ñ∂Ô∏è START 20-SECOND DEMO</button>

    <div class="links">
      <a href="/api-docs" target="_blank">üìñ Interactive API Docs</a>
      <a href="/health" target="_blank">üíì Health Check</a>
      <a href="/api/products" target="_blank">üì¶ Products API</a>
    </div>

    <div class="instruction">
      <strong>üéØ Features Demonstrated:</strong><br />
      ‚úÖ Async/Await patterns<br />
      ‚úÖ SQLite database integration<br />
      ‚úÖ Retry policy with Polly<br />
      ‚úÖ REST API with full CRUD
    </div>

    <script>
      let demoTimer;
      let secondsLeft = 20;

      function startDemo() {
        secondsLeft = 20;
        const timerElement = document.getElementById("timer");
        const steps = document.querySelectorAll(".step");

        // Reset all steps
        steps.forEach((step) => step.classList.remove("active"));

        demoTimer = setInterval(() => {
          timerElement.textContent = secondsLeft;

          // Highlight current step
          steps.forEach((step) => step.classList.remove("active"));

          if (secondsLeft > 15) {
            document.getElementById("step1").classList.add("active");
          } else if (secondsLeft > 10) {
            document.getElementById("step2").classList.add("active");
          } else if (secondsLeft > 5) {
            document.getElementById("step3").classList.add("active");
          } else if (secondsLeft > 0) {
            document.getElementById("step4").classList.add("active");
          }

          secondsLeft--;

          if (secondsLeft < 0) {
            clearInterval(demoTimer);
            timerElement.textContent = "‚úÖ DONE!";
            steps.forEach((step) => step.classList.remove("active"));
          }
        }, 1000);
      }

      // Auto-test API health on page load
      fetch("/health")
        .then((response) => response.json())
        .then((data) => {
          console.log("‚úÖ API Ready:", data);
          document.querySelector(".instruction").innerHTML =
            "üü¢ <strong>API IS LIVE</strong> - Ready for 20-second demo!";
        })
        .catch((error) => {
          console.log("‚ö†Ô∏è API not ready:", error);
          document.querySelector(".instruction").innerHTML =
            "üî¥ <strong>API Starting...</strong> - Please wait a moment";
        });
    </script>
  </body>
</html>
