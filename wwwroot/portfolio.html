<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Christo Lotriet ‚Äî Software Developer</title>
    <meta
      name="description"
      content="Software Developer ‚Äî .NET & C# ¬∑ APIs ¬∑ Databases"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/style.css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
      defer
    ></script>
    <script src="assets/main.js" defer></script>
  </head>
  <body>
    <div class="wrap">
      <header class="hero">
        <h1>Christo Lotriet</h1>
        <div class="sub">Software Developer ‚Äî .NET & C# ¬∑ APIs ¬∑ Databases</div>
        <div>
          <span class="tag">Legacy ‚Üí Modern</span>
          <span class="tag">Desktop ‚Üí Web</span>
          <span class="tag">APIs + Data</span>
        </div>
        <div class="cta">
          <a class="btn primary" href="#demo">‚ñ∂Ô∏è 20‚Äësec demo</a>
          <a
            class="btn"
            href="https://linkedin.com/in/gclotriet"
            target="_blank"
            rel="noopener"
            >Connect on LinkedIn</a
          >
          <a
            class="btn"
            href="https://github.com/lotriet"
            target="_blank"
            rel="noopener"
            >View code on GitHub</a
          >
          <a class="btn" href="mailto:gclotriet@outlook.com">Email me</a>
        </div>
      </header>

      <section class="grid">
        <div class="card">
          <h2 style="margin: 0 0 8px 0">What I do</h2>
          <p style="margin: 0 0 10px 0">
            I modernize legacy desktop apps into fast, clean REST‚Äëbacked
            services on .NET with SQL databases. I like measurable wins and
            boringly reliable systems.
          </p>
          <div class="kpis">
            <div class="kpi">
              Public records web access (ASP.NET MVC/C#/SQL)
            </div>
            <div class="kpi">Secure online payments integration</div>
            <div class="kpi">REST APIs & DB optimization</div>
          </div>
        </div>
        <div class="card" id="qrCard">
          <div
            style="
              display: flex;
              gap: 14px;
              align-items: center;
              justify-content: space-between;
            "
          >
            <div>
              <div style="font-weight: 700; margin-bottom: 6px">
                Tap/Scan to view CV
              </div>
              <div style="font-size: 14px; color: var(--muted)">
                Complete portfolio and contact information
              </div>
              <div id="shortUrl" style="margin-top: 8px; font-weight: 600">
                lotriet.dev/index.html
              </div>
            </div>
            <div id="qrcode" class="qr"></div>
          </div>
        </div>
      </section>

      <!-- AI Chatbot Section -->
      <section class="card" id="chatbot" style="margin-top: 14px">
        <h2 style="margin: 0 0 8px 0">ü§ñ Smart AI Portfolio Assistant</h2>
        <p style="margin: 0 0 15px 0; color: var(--muted)">
          Ask me anything about Christo's experience! I use real AI (GPT-4.1) to
          analyze his live CV data and provide accurate, contextual responses.
        </p>

        <div
          id="chatContainer"
          style="
            height: 300px;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow-y: auto;
            padding: 15px;
            background: var(--bg);
            margin-bottom: 15px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
              sans-serif;
          "
        >
          <div class="chat-message bot-message">
            <div class="message-bubble bot">
              üëã Hello! I'm Christo's AI assistant. Ask me about his .NET
              experience, projects, or availability!
            </div>
          </div>
        </div>

        <div style="display: flex; gap: 8px; margin-bottom: 10px">
          <input
            type="text"
            id="chatInput"
            placeholder="Ask about skills, experience, projects..."
            style="
              flex: 1;
              padding: 10px 12px;
              border: 1px solid var(--border);
              border-radius: 6px;
              font-size: 14px;
              background: var(--bg);
              color: var(--text);
            "
          />
          <button
            id="sendBtn"
            style="
              padding: 10px 20px;
              background: var(--primary);
              color: white;
              border: none;
              border-radius: 6px;
              cursor: pointer;
              font-weight: 500;
            "
          >
            Send
          </button>
        </div>

        <div id="suggestions" style="display: flex; flex-wrap: wrap; gap: 6px">
          <!-- Suggestion chips will be added by JavaScript -->
        </div>
      </section>

      <section class="card" id="demo" style="margin-top: 14px">
        <h2 style="margin: 0 0 8px 0">20‚Äësecond micro‚Äëdemo</h2>
        <p style="margin: 0 0 10px 0">
          A tiny REST service in .NET calling a SQLite database with async/await
          and retry policy.
          <strong>Try the live demo below!</strong>
        </p>

        <!-- Live Demo Integration -->
        <div
          style="
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            color: white;
          "
        >
          <div style="text-align: center; margin-bottom: 15px">
            <div
              style="font-size: 1.2rem; font-weight: bold; margin-bottom: 10px"
            >
              <span id="demoStatus" style="color: #fbbf24"
                >ÔøΩ Checking API...</span
              >
            </div>
            <div
              style="
                display: flex;
                gap: 12px;
                justify-content: center;
                flex-wrap: wrap;
              "
            >
              <button
                onclick="startQuickDemo()"
                style="
                  background: #fbbf24;
                  color: #1f2937;
                  padding: 12px 24px;
                  border: none;
                  border-radius: 25px;
                  font-weight: bold;
                  cursor: pointer;
                  font-size: 1rem;
                "
              >
                üöÄ START 20-SECOND DEMO
              </button>
            </div>
            <div style="font-size: 0.85rem; color: #9ca3af; margin-top: 8px">
              Click to view demo details and live execution
            </div>
          </div>
        </div>

        <!-- Live Demo Output -->
        <div
          id="demoOutput"
          style="
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            display: none;
          "
        >
          Demo output will appear here...
        </div>

        <!-- Demo Timer -->
        <div
          id="demoTimer"
          style="
            text-align: center;
            font-size: 1.5rem;
            margin-top: 10px;
            color: #fbbf24;
            font-weight: bold;
            display: none;
          "
        >
          Preparing demo...
        </div>

        <div
          id="demoDetails"
          style="
            display: none;
            opacity: 0;
            transition: all 0.3s ease-in-out;
            max-height: 0;
            overflow: hidden;
          "
        >
          <div
            style="
              background: #f8f9fa;
              border-radius: 8px;
              padding: 15px;
              margin: 10px 0;
              border-left: 4px solid #4299e1;
            "
          >
            <h4 style="margin: 0 0 10px 0; color: #333">‚è±Ô∏è Demo Timeline:</h4>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                color: #555;
              "
            >
              <div><strong>‚úÖ</strong> API Health Check</div>
              <div><strong>‚úÖ</strong> Async Products Query</div>
              <div><strong>‚úÖ</strong> Database Insert</div>
              <div><strong>‚úÖ</strong> Retry Policy Demo</div>
            </div>
          </div>

          <div
            style="
              background: #f8f9fa;
              border-radius: 8px;
              padding: 15px;
              margin: 10px 0;
              border-left: 4px solid #4299e1;
            "
          >
            <h4 style="margin: 0 0 10px 0; color: #333">
              üéØ What's Demonstrated:
            </h4>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                color: #555;
              "
            >
              <div>‚úÖ <strong>Async/Await</strong> patterns</div>
              <div>‚úÖ <strong>SQLite</strong> database</div>
              <div>‚úÖ <strong>Retry Policy</strong> with Polly</div>
              <div>‚úÖ <strong>REST API</strong> with Swagger</div>
            </div>
          </div>
        </div>
        <div class="foot">
          CV:
          <a href="https://lotriet.dev" target="_blank" rel="noopener"
            >lotriet.dev</a
          >
        </div>
      </section>

      <section class="grid" style="margin-top: 14px">
        <div class="card proj">
          <div class="title">Document Management Web Platform</div>
          <div>
            <b>Focus:</b> Enhance ASP.NET MVC/C#/SQL features for usability and
            reliable document access; API payment gateway integrations for
            secure online transactions.
          </div>
          <div class="foot">Stack: ASP.NET MVC, C#, SQL, Payments</div>
        </div>
        <div class="card proj">
          <div class="title">Healthcare Practice Management</div>
          <div>
            <b>Focus:</b> Designed REST API services for healthcare data
            workflows and optimized database performance for high-volume
            operations.
          </div>
          <div class="foot">Stack: REST APIs, PostgreSQL, JavaScript UI</div>
        </div>
      </section>

      <footer class="foot" style="margin-top: 18px">
        <b>Contact:</b>
        <a href="mailto:gclotriet@outlook.com">gclotriet@outlook.com</a> ‚Ä¢
        <a
          href="https://linkedin.com/in/gclotriet"
          target="_blank"
          rel="noopener"
          >LinkedIn</a
        >
        ‚Ä¢
        <a href="https://github.com/lotriet" target="_blank" rel="noopener"
          >GitHub</a
        >
      </footer>
    </div>

    <script>
      // Demo functionality
      let demoRunning = false;
      let demoTimer = null;

      // Check if the .NET API is running
      async function checkAPIStatus() {
        try {
          const response = await fetch("/health"); // Relative URL since same domain
          if (response.ok) {
            document.getElementById("demoStatus").innerHTML =
              "üü¢ API Live & Ready!";
            document.getElementById("demoStatus").style.color = "#34d399";
            return true;
          }
        } catch (error) {
          document.getElementById("demoStatus").innerHTML =
            "üî¥ API Not Running (Start .NET app first)";
          document.getElementById("demoStatus").style.color = "#f87171";
          return false;
        }
      }

      // Log demo output with clean, readable formatting
      function logDemo(message, type = "info", indent = 0) {
        const output = document.getElementById("demoOutput");
        const timestamp = new Date().toLocaleTimeString();
        const color =
          type === "success"
            ? "#10b981"
            : type === "error"
            ? "#ef4444"
            : type === "warning"
            ? "#f59e0b"
            : type === "header"
            ? "#3b82f6"
            : type === "section"
            ? "#8b5cf6"
            : type === "phase"
            ? "#06b6d4"
            : "#9ca3af";

        const indentSpaces = "   ".repeat(indent);
        let prefix = "";
        let fontWeight = "normal";
        let fontSize = "0.9rem";

        if (type === "header") {
          prefix = "";
          fontWeight = "bold";
          fontSize = "1rem";
        } else if (type === "section" || type === "phase") {
          prefix = "";
          fontWeight = "bold";
          fontSize = "0.95rem";
        } else {
          prefix = `[${timestamp}] `;
        }

        output.innerHTML += `<div style="color: ${color}; font-weight: ${fontWeight}; font-size: ${fontSize}; margin: 2px 0; line-height: 1.4;">${prefix}${indentSpaces}${message}</div>`;
        output.scrollTop = output.scrollHeight;
      }

      // Add spacing between sections
      function addSpace(lines = 1) {
        const output = document.getElementById("demoOutput");
        for (let i = 0; i < lines; i++) {
          output.innerHTML += "<div style='height: 8px;'></div>";
        }
        output.scrollTop = output.scrollHeight;
      }

      // Expand demo details with smooth animation
      function expandDemoDetails() {
        const demoDetails = document.getElementById("demoDetails");
        demoDetails.style.display = "block";

        // Force a reflow to ensure display: block is applied
        demoDetails.offsetHeight;

        // Set max-height to the actual content height for smooth animation
        const contentHeight = demoDetails.scrollHeight;
        demoDetails.style.maxHeight = contentHeight + "px";
        demoDetails.style.opacity = "1";
      }

      // Start the 20-second demo
      async function startQuickDemo() {
        if (demoRunning) return;

        demoRunning = true;
        const output = document.getElementById("demoOutput");
        const timer = document.getElementById("demoTimer");

        // Expand demo details first
        expandDemoDetails();

        output.style.display = "block";
        timer.style.display = "block";
        output.innerHTML = "";

        // Header
        logDemo("üöÄ .NET MICRO-DEMO", "header");
        logDemo("20-Second Live Demonstration", "header");
        addSpace(2);

        let seconds = 20;
        const timerInterval = setInterval(() => {
          timer.textContent = `${seconds}s remaining`;
          seconds--;
          if (seconds < 0) {
            clearInterval(timerInterval);
            timer.textContent = "‚úÖ Demo Complete!";
          }
        }, 1000);

        try {
          // Phase 1: API Health Check
          logDemo("‚îå‚îÄ PHASE 1: API HEALTH CHECK", "phase");
          logDemo("‚îî‚îÄ Checking API status and features...", "warning", 1);
          const healthResponse = await fetch("/health"); // Relative URL
          const healthData = await healthResponse.json();
          logDemo("‚úÖ API Status: " + healthData.status, "success", 1);
          logDemo("üîß Features: " + healthData.features.join(", "), "info", 1);
          addSpace();

          await sleep(3000);

          // Phase 2: Database Query
          logDemo("‚îå‚îÄ PHASE 2: ASYNC DATABASE QUERY", "phase");
          logDemo("‚îî‚îÄ Querying SQLite with Entity Framework...", "warning", 1);
          const productsResponse = await fetch("/api/products"); // Relative URL
          const productsData = await productsResponse.json();
          logDemo(
            `‚úÖ Retrieved ${productsData.length} products from SQLite`,
            "success",
            1
          );
          logDemo("üìã Sample records:", "info", 1);
          productsData.slice(0, 2).forEach((product) => {
            logDemo(`   ‚Ä¢ ${product.name} - $${product.price}`, "info", 1);
          });
          addSpace();

          await sleep(3000);

          // Phase 3: Database Insert
          logDemo("‚îå‚îÄ PHASE 3: DATABASE INSERT", "phase");
          logDemo("‚îî‚îÄ Creating new product record...", "warning", 1);
          const timestamp = new Date().toISOString().slice(11, 19);
          const newProduct = {
            name: `Demo Product ${timestamp}`,
            price: Math.round((Math.random() * 100 + 10) * 100) / 100,
            description: "Sample product for demonstration",
          };

          logDemo(
            `üìù Product: ${newProduct.name} - $${newProduct.price}`,
            "info",
            1
          );

          const createResponse = await fetch("/api/products", {
            // Relative URL
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(newProduct),
          });

          if (createResponse.ok) {
            const created = await createResponse.json();
            logDemo(`‚úÖ Created successfully! ID: ${created.id}`, "success", 1);
          }
          addSpace();

          await sleep(3000);

          // Phase 4: Retry Policy & Architecture
          logDemo("‚îå‚îÄ PHASE 4: RETRY POLICY & ARCHITECTURE", "phase");
          logDemo("‚îî‚îÄ Polly protection and tech stack...", "warning", 1);
          logDemo("üõ°Ô∏è Retry Policy:", "success", 1);
          logDemo("   ‚Ä¢ 3 attempts with exponential backoff", "info", 1);
          logDemo("   ‚Ä¢ Delays: 2s ‚Üí 4s ‚Üí 8s between retries", "info", 1);
          addSpace();
          logDemo("üèóÔ∏è Technology Stack:", "success", 1);
          logDemo("   ‚Ä¢ .NET 8 Web API + Entity Framework Core", "info", 1);
          logDemo("   ‚Ä¢ SQLite Database + Async/Await patterns", "info", 1);
          addSpace(2);

          await sleep(2000);

          // Final Summary
          logDemo("üéâ DEMO COMPLETE!", "header");
          logDemo("All systems operational and tested", "header");
          addSpace();
          logDemo("‚úÖ Async/await patterns demonstrated", "success", 1);
          logDemo("‚úÖ Database operations with retry protection", "success", 1);
          logDemo("‚úÖ Real-time REST API functionality", "success", 1);
        } catch (error) {
          addSpace();
          logDemo("‚ùå DEMO FAILED", "error");
          logDemo("Error: " + error.message, "error", 1);
          logDemo("üí° Ensure .NET API is running", "warning", 1);
        }

        demoRunning = false;
      }

      function sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      // Check API status on page load
      setTimeout(checkAPIStatus, 1000);
    </script>
  </body>
</html>
